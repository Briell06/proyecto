{% extends "airline_app/base.html" %}
{% block title %}
  Vuelo {{ flight.flight_number }} - AeroControl
{% endblock title %}
{% block content %}
  <div class="space-y-6">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <a href="{% url 'flight_list' %}"
           class="text-gray-400 hover:text-cyan-400 transition"><i class="fas fa-arrow-left text-xl"></i></a>
        <h1 class="text-3xl font-bold text-gray-100">
          <i class="fas fa-plane-departure mr-3 text-cyan-400"></i>{{ flight.flight_number }}
        </h1>
      </div>
      <div class="flex items-center space-x-3">
        <a href="{% url 'flight_update' flight.pk %}"
           class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition"><i class="fas fa-edit mr-2"></i>Editar</a>
        <a href="{% url 'flight_delete' flight.pk %}"
           class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition"><i class="fas fa-trash mr-2"></i>Eliminar</a>
      </div>
    </div>
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <div class="lg:col-span-2 space-y-6">
        <div class="bg-dark-900 rounded-xl p-6 border border-dark-800">
          <h2 class="text-xl font-bold text-gray-100 mb-4">
            <i class="fas fa-info-circle mr-2 text-cyan-400"></i>Información del Vuelo
          </h2>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <p class="text-sm text-gray-400 mb-1">Número de Vuelo</p>
              <p class="text-lg font-bold text-cyan-400">{{ flight.flight_number }}</p>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Estado</p>
              <span class="inline-block px-3 py-1 rounded-full text-sm font-semibold {% if flight.status == 'SCHEDULED' %}bg-blue-900/50 text-blue-300{% elif flight.status == 'IN_PROGRESS' %}bg-green-900/50 text-green-300{% elif flight.status == 'COMPLETED' %}bg-gray-700 text-gray-300{% elif flight.status == 'CANCELLED' %}bg-red-900/50 text-red-300{% else %}bg-yellow-900/50 text-yellow-300{% endif %}">{{ flight.get_status_display }}</span>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Origen</p>
              <p class="text-lg font-semibold text-gray-100">{{ flight.origin }}</p>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Destino</p>
              <p class="text-lg font-semibold text-gray-100">{{ flight.destination }}</p>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Salida</p>
              <p class="text-lg font-semibold text-gray-100">{{ flight.departure_time|date:"d/m/Y H:i" }}</p>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Llegada</p>
              <p class="text-lg font-semibold text-gray-100">{{ flight.arrival_time|date:"d/m/Y H:i" }}</p>
            </div>
          </div>
        </div>
        <div class="bg-dark-900 rounded-xl p-6 border border-dark-800">
          <h2 class="text-xl font-bold text-gray-100 mb-4">
            <i class="fas fa-boxes mr-2 text-purple-400"></i>Recursos Asignados
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-dark-800 rounded-lg p-4">
              <div class="flex items-center space-x-3 mb-2">
                <i class="fas fa-road text-2xl text-purple-400"></i>
                <div>
                  <p class="text-sm text-gray-400">Pista</p>
                  <p class="font-bold text-gray-100">{{ flight.runway.runway_code }}</p>
                </div>
              </div>
            </div>
            <div class="bg-dark-800 rounded-lg p-4">
              <div class="flex items-center space-x-3 mb-2">
                <i class="fas fa-door-open text-2xl text-blue-400"></i>
                <div>
                  <p class="text-sm text-gray-400">Puerta</p>
                  <p class="font-bold text-gray-100">{{ flight.gate.gate_code }}</p>
                </div>
              </div>
            </div>
            <div class="bg-dark-800 rounded-lg p-4">
              <div class="flex items-center space-x-3 mb-2">
                <i class="fas fa-plane text-2xl text-green-400"></i>
                <div>
                  <p class="text-sm text-gray-400">Aeronave</p>
                  <p class="font-bold text-gray-100">{{ flight.aircraft.registration_number }}</p>
                </div>
              </div>
            </div>
            <div class="bg-dark-800 rounded-lg p-4">
              <div class="flex items-center space-x-3 mb-2">
                <i class="fas fa-user-tie text-2xl text-yellow-400"></i>
                <div>
                  <p class="text-sm text-gray-400">Piloto</p>
                  <p class="font-bold text-gray-100">{{ flight.pilot.get_full_name }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-dark-900 rounded-xl p-6 border border-dark-800">
          <h2 class="text-xl font-bold text-gray-100 mb-4">
            <i class="fas fa-users mr-2 text-orange-400"></i>Copilotos Asignados
          </h2>
          <div class="space-y-2">
            {% for copilot in flight.copilots.all %}
              <div class="bg-dark-800 rounded-lg p-3 flex items-center space-x-3">
                <i class="fas fa-user text-orange-400"></i>
                <span class="text-gray-100">{{ copilot.get_full_name }}</span>
                <span class="text-sm text-gray-400">({{ copilot.license_number }})</span>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
      <div class="space-y-6">
        <div class="bg-gradient-to-br from-cyan-900/50 to-blue-900/50 rounded-xl p-6 border border-cyan-800/50">
          <h3 class="text-lg font-bold text-cyan-300 mb-4">
            <i class="fas fa-clock mr-2"></i>Duración
          </h3>
          <p class="text-4xl font-bold text-gray-100">{{ duration|floatformat:1 }} h</p>
        </div>
        <div class="bg-gradient-to-br from-yellow-900/50 to-orange-900/50 rounded-xl p-6 border border-yellow-800/50">
          <h3 class="text-lg font-bold text-yellow-300 mb-2">
            <i class="fas fa-users mr-2"></i>Copilotos
          </h3>
          <p class="text-gray-300 text-sm mb-2">
            Requeridos: <span class="font-bold text-yellow-300">{{ required_copilots }}</span>
          </p>
          <p class="text-gray-300 text-sm">
            Asignados: <span class="font-bold {% if assigned_copilots >= required_copilots %}text-green-300{% else %}text-red-300{% endif %}">{{ assigned_copilots }}</span>
          </p>
          {% if assigned_copilots < required_copilots %}
            <div class="mt-3 bg-red-900/50 border border-red-700 text-red-200 px-3 py-2 rounded-lg text-sm">
              <i class="fas fa-exclamation-triangle mr-2"></i>Faltan copilotos
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
