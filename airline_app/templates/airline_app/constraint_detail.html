{% extends 'airline_app/base.html' %}
{% block title %}
  Detalles de Restricción - Sistema de Gestión de Aeropuerto
{% endblock title %}
{% block content %}
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <div class="mb-8">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-4xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
            {{ constraint.name }}
          </h1>
          <div class="flex items-center space-x-3 mt-3">
            <span class="px-3 py-1 text-sm font-medium rounded-full {% if constraint.constraint_type == 'CO_REQUISITE' %}bg-blue-900/50 text-blue-300 border border-blue-700{% else %}bg-red-900/50 text-red-300 border border-red-700{% endif %}">
              {% if constraint.constraint_type == 'CO_REQUISITE' %}
                <i class="fas fa-check-double mr-1"></i>Co-requisito
              {% else %}
                <i class="fas fa-ban mr-1"></i>Exclusión Mutua
              {% endif %}
            </span>
            {% if constraint.is_active %}
              <span class="px-3 py-1 text-sm font-medium rounded-full bg-green-900/50 text-green-300 border border-green-700">
                <i class="fas fa-check-circle mr-1"></i>Activa
              </span>
            {% else %}
              <span class="px-3 py-1 text-sm font-medium rounded-full bg-gray-900/50 text-gray-400 border border-gray-700">
                <i class="fas fa-pause mr-1"></i>Inactiva
              </span>
            {% endif %}
          </div>
        </div>
        <div class="flex items-center space-x-3">
          <a href="{% url 'constraint_update' constraint.pk %}"
             class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
            <i class="fas fa-edit mr-2"></i>Editar
          </a>
          <a href="{% url 'constraint_delete' constraint.pk %}"
             class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
            <i class="fas fa-trash mr-2"></i>Eliminar
          </a>
        </div>
      </div>
    </div>
    <!-- Content -->
    <div class="grid gap-6">
      <!-- Description -->
      <div class="bg-dark-900/50 backdrop-blur-lg border border-dark-800 rounded-xl p-6">
        <h2 class="text-xl font-semibold text-cyan-400 mb-4">
          <i class="fas fa-info-circle mr-2"></i>Descripción
        </h2>
        <p class="text-gray-300">{{ constraint.description }}</p>
      </div>
      <!-- Resources -->
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Primary Resource -->
        <div class="bg-dark-900/50 backdrop-blur-lg border border-dark-800 rounded-xl p-6">
          <h2 class="text-xl font-semibold text-cyan-400 mb-4">
            <i class="fas fa-star mr-2"></i>Recurso Primario
          </h2>
          <div class="space-y-3">
            <div>
              <span class="text-gray-500 text-sm">Tipo:</span>
              <p class="text-gray-200 font-medium">{{ constraint.get_primary_resource_type_display }}</p>
            </div>
            <div>
              <span class="text-gray-500 text-sm">ID:</span>
              <p class="text-gray-200 font-medium">{{ constraint.primary_resource_id }}</p>
            </div>
            {% if primary_resource %}
              <div>
                <span class="text-gray-500 text-sm">Detalles:</span>
                <p class="text-cyan-400 font-medium">{{ primary_resource }}</p>
              </div>
            {% endif %}
          </div>
        </div>
        <!-- Related Resource -->
        <div class="bg-dark-900/50 backdrop-blur-lg border border-dark-800 rounded-xl p-6">
          <h2 class="text-xl font-semibold text-cyan-400 mb-4">
            <i class="fas fa-{% if constraint.constraint_type == 'CO_REQUISITE' %}link{% else %}unlink{% endif %} mr-2"></i>Recurso
            {% if constraint.constraint_type == 'CO_REQUISITE' %}Requerido{% else %}Excluido{% endif %}
          </h2>
          <div class="space-y-3">
            <div>
              <span class="text-gray-500 text-sm">Tipo:</span>
              <p class="text-gray-200 font-medium">{{ constraint.get_related_resource_type_display }}</p>
            </div>
            <div>
              <span class="text-gray-500 text-sm">ID:</span>
              <p class="text-gray-200 font-medium">{{ constraint.related_resource_id }}</p>
            </div>
            {% if related_resource %}
              <div>
                <span class="text-gray-500 text-sm">Detalles:</span>
                <p class="text-cyan-400 font-medium">{{ related_resource }}</p>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
      <!-- Rule Explanation -->
      <div class="bg-dark-900/50 backdrop-blur-lg border border-{% if constraint.constraint_type == 'CO_REQUISITE' %}blue{% else %}red{% endif %}-800 rounded-xl p-6">
        <h2 class="text-xl font-semibold text-cyan-400 mb-4">
          <i class="fas fa-balance-scale mr-2"></i>Regla de Negocio
        </h2>
        <div class="bg-dark-800/50 rounded-lg p-4">
          {% if constraint.constraint_type == 'CO_REQUISITE' %}
            <p class="text-blue-300 text-lg">
              <i class="fas fa-arrow-right mr-2"></i>
              Si un vuelo usa <strong class="text-cyan-400">{{ primary_resource }}</strong>,
              entonces <strong class="text-green-400">DEBE</strong> incluir <strong class="text-cyan-400">{{ related_resource }}</strong>
            </p>
          {% else %}
            <p class="text-red-300 text-lg">
              <i class="fas fa-arrow-right mr-2"></i>
              Si un vuelo usa <strong class="text-cyan-400">{{ primary_resource }}</strong>,
              entonces <strong class="text-red-400">NO PUEDE</strong> usar <strong class="text-cyan-400">{{ related_resource }}</strong>
            </p>
          {% endif %}
        </div>
      </div>
      <!-- Metadata -->
      <div class="bg-dark-900/50 backdrop-blur-lg border border-dark-800 rounded-xl p-6">
        <h2 class="text-xl font-semibold text-cyan-400 mb-4">
          <i class="fas fa-clock mr-2"></i>Información Adicional
        </h2>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <span class="text-gray-500">Creada:</span>
            <p class="text-gray-300">{{ constraint.created_at|date:"d/m/Y H:i" }}</p>
          </div>
          <div>
            <span class="text-gray-500">Última actualización:</span>
            <p class="text-gray-300">{{ constraint.updated_at|date:"d/m/Y H:i" }}</p>
          </div>
        </div>
      </div>
    </div>
    <!-- Back Button -->
    <div class="mt-8">
      <a href="{% url 'constraint_list' %}"
         class="inline-flex items-center px-6 py-3 bg-dark-800 text-gray-300 rounded-lg hover:bg-dark-700 transition">
        <i class="fas fa-arrow-left mr-2"></i>Volver a la Lista
      </a>
    </div>
  </div>
{% endblock content %}
